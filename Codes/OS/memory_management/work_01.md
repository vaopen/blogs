# 作业 1

设有二维数组 `int A[100][100];` 其中数组元素 `A[0, 0]` 存放在页面大小为 `200` 的分页存储管理系统中的地址 `200` 处，数组按行存储

使用该数组的一个较小的程序存放在第 `0` 页中（地址 `0 - 199` ），这样将只会从第 `0` 页取指令

假定现有 `3` 个页面，第 `1` 个页面存放程序， 其余 `2` 个页面初始为空

试问：若使用 `LRU` 替换算法，下面的数组初始化循环将会产生多少次缺页中断？

1. 第一种

   ```cpp
   for (int j = 0; j < 100; j++) {
      for (int i = 0; i < 100; i++) {
         A[i, j] = 0;
      }
   }
   ```

2. 第二种
   ```cpp
   for (int i = 0; i < 100; i++) {
      for (int j = 0; j < 100; j++) {
         A[i, j] = 0;
      }
   }
   ```

## 分析

> emmmm ，鉴于考虑 $i\ j$ 的话会太复杂（$i\ j$ 可能在不同页面），所以题意应该是不需要考虑的吧 :joy:

共有 $100 \times 100 \times 4 = 40000$ 字节的数据，存放在连续的 `200` 个物理块中，竞争 `2` 个物理页面

-  若逐行操作则每次都是连续的
-  若逐列操作则每次跨 $100 \times 4 = 400$ 字节，必须调页

## 解答

1. 逐列读取，每次都需要重新调页，需要 $100 \times 100 = 10000$ 次缺页中断
2. 逐行读取，每 $\frac{200}{4} = 50$ 次需要重新调页，需要 $\frac{10000}{50} = 200$ 次缺页中断

> 老师课上讲的没有考虑一个 `int` 的大小，故每页可以存 `2` 行，按列读每两个数据调一次页，故需 `5000` 次，而按行读每两行数据调一次页，故需 `50` 次
